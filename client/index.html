<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <nav>
        <span>Adoption</span>
        <span>Owners</span>
        <span>My Eskel</span>
        <div class="profile-container">
            <div class="profile-picture">
            </div>
        </div>
    </nav>
<div class="instructions-container">
    <div class="title"></div>
    <div class="arrow"></div>
    <div class="filters">
        <span class="filters-title">TYPES</span>
        <div class="option-container">
            <div class="option"><div id="plant" class="filter-img plant-filter"></div><span class="filter-txt">Plant</span></div>
            <div class="option"><div id="ghost" class="filter-img ghost-filter"></div><span class="filter-txt">Ghost</span></div>
            <div class="option"><div id="demon" class="filter-img demon-filter"></div><span class="filter-txt">Demon</span></div>
            <div class="option"><div id="dirt" class="filter-img dirt-filter"></div><span class="filter-txt">Dirt</span></div>
        </div>
    </div>
</div>

<div class="pet-container pet-plant" data-id="1">
    <div class="description">
        <div class="id-container"><span>ID  </span><span class="data data-plant">1</span></div>
        <div class="type-container"><span>Type </span><span class="data data-plant">plant</span></div>
        <div class="element-container">
            <div class="element"></div>
        </div>
    </div>
    <div class="frame base">
        <div class="pet-img"></div>
    </div>
    <div class="frame evolution1">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="frame evolution2">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <span>Adopt this pet to evolve</span>
            </div>
        </div>
    </div>
    <div class="adoption">
        <span>ADOPTION</span>
        <input type="text" placeholder="Username" class="username">
        <input type="text" placeholder="Pet's Name" class="pet-name">
        <input type="text" placeholder="Code" class="code">
        <input type="date" placeholder="Birthday" class="birthday">
        <button class="adopt-btn">Adopt</button>
    </div>
</div>

<div class="pet-container pet-ghost" data-id="2">
    <div class="description">
        <div class="id-container"><span>ID  </span><span class="data data-ghost">2</span></div>
        <div class="type-container"><span>Type </span><span class="data data-ghost">ghost</span></div>
        <div class="element-container">
            <div class="element"></div>
        </div>
    </div>
    <div class="frame base">
        <div class="pet-img"></div>
    </div>
    <div class="frame evolution1">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="frame evolution2">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="adoption">
        <input type="text" placeholder="Username" class="username">
        <input type="text" placeholder="Pet's Name" class="pet-name">
        <input type="text" placeholder="Code" class="code">
        <input type="date" placeholder="Birthday" class="birthday">
        <button class="adopt-btn">Adopt</button>
    </div>
</div>

<div class="pet-container pet-dirt" data-id="3">
    <div class="description">
        <div class="id-container"><span>ID  </span><span class="data data-dirt">3</span></div>
        <div class="type-container"><span>Type </span><span class="data data-dirt">dirt</span></div>
        <div class="element-container">
            <div class="element"></div>
        </div>
    </div>
    <div class="frame base">
        <div class="pet-img"></div>
    </div>
    <div class="frame evolution1">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="frame evolution2">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="adoption">
        <input type="text" placeholder="Username" class="username">
        <input type="text" placeholder="Pet's Name" class="pet-name">
        <input type="text" placeholder="Code" class="code">
        <input type="date" placeholder="Birthday" class="birthday">
        <button class="adopt-btn">Adopt</button>
    </div>
</div>

<div class="pet-container pet-demon" data-id="4">
    <div class="description">
        <div class="id-container"><span>ID  </span><span class="data data-demon">4</span></div>
        <div class="type-container"><span>Type </span><span class="data data-demon">demon</span></div>
        <div class="element-container">
            <div class="element"></div>
        </div>
    </div>
    <div class="frame base">
        <div class="pet-img"></div>
    </div>
    <div class="frame evolution1">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="frame evolution2">
        <div class="frame-inner">
            <div class="frame-front">
                <span class="question-mark">?</span>
            </div>
            <div class="frame-back">
                <!-- Back Image -->
            </div>
        </div>
    </div>
    <div class="adoption">
        <input type="text" placeholder="Username" class="username">
        <input type="text" placeholder="Pet's Name" class="pet-name">
        <input type="text" placeholder="Code" class="code">
        <input type="date" placeholder="Birthday" class="birthday">
        <button class="adopt-btn">Adopt</button>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const filters = document.querySelectorAll('.filters .filter-img');
        const petContainers = document.querySelectorAll('.pet-container');
        const activeFilters = new Set();

        filters.forEach(filter => {
            filter.addEventListener('click', function() {
                const filterId = filter.id;
                if (activeFilters.has(filterId)) {
                    activeFilters.delete(filterId);
                    filter.classList.remove('active');
                } else {
                    activeFilters.add(filterId);
                    filter.classList.add('active');
                }
                updateVisibility();
            });
        });

        function updateVisibility() {
            if (activeFilters.size === 0) {
                petContainers.forEach(container => container.classList.remove('hidden'));
            } else {
                petContainers.forEach(container => {
                    let isVisible = false;
                    activeFilters.forEach(filter => {
                        if (container.classList.contains('pet-' + filter)) {
                            isVisible = true;
                        }
                    });
                    if (isVisible) {
                        container.classList.remove('hidden');
                    } else {
                        container.classList.add('hidden');
                    }
                });
            }
        }


        const adoptButtons = document.querySelectorAll('.adopt-btn');
        adoptButtons.forEach(button => {
            button.addEventListener('click', function() {
                const petContainer = button.closest('.pet-container');
                const id = petContainer.getAttribute('data-id');
                const username = petContainer.querySelector('.username').value;
                const petName = petContainer.querySelector('.pet-name').value;
                const code = petContainer.querySelector('.code').value;
                const birthday = petContainer.querySelector('.birthday').value;

                const data = {
                    id: id,
                    username: username,
                    pet_name: petName,
                    birthday: birthday,
                    code: code
                };

                fetch('http://localhost:3000/api/adopt', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
            });
        });
    });
</script>

</body>
</html>
